# 部署

## Self-Host 下载

[dapr/installer-bundle: Dapr bundled installer containing CLI and runtime packaged together. This eliminated the need to download Docker images when initializing Dapr locally.](https://github.com/dapr/installer-bundle)

## 资源需求

[Production guidelines on Kubernetes | Dapr Docs](https://docs.dapr.io/operations/hosting/kubernetes/kubernetes-production)

## 边车默认端口

### 3500 DaprHttpPort

### 50001 DaprGrpcPort

### 50002 DaprGrpcPort for Internal ?

### 9090 MetricsPort

## Preventing IP addresses on Dapr

To prevent Dapr sidecars from being called on any IP address (especially in production environments such as Kubernetes), Dapr restricts its listening IP addresses to `localhost`. Use the [dapr-listen-addresses](https://docs.dapr.io/zh-hans/reference/arguments-annotations-overview/) setting if you need to enable access from external addresses.

Comma separated list of IP addresses that sidecar will listen to. Defaults to all in standalone mode. Defaults to `[::1],127.0.0.1` in Kubernetes. To listen to all IPv4 addresses, use `0.0.0.0`. To listen to all IPv6 addresses, use `[::]`.


## 安全

`dapr` 类似于 `k8s` 每一年需要刷新证书，否则会出现认证出错导致边车无法被注入的情况。
内网进行证书刷新需要安装 `dapr cli` 到任意一个 `k8s` 节点上运行，但由于 `cli` 需要网络进行刷新，因此无法连接互联网则需要手动进行证书刷新：
[Setup & configure mTLS certificates | Dapr Docs](https://docs.dapr.io/operations/security/mtls/#bringing-your-own-certificates)